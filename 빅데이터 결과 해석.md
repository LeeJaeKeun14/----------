# 빅데이터 결과 해석

- [빅데이터 결과 해석](#빅데이터-결과-해석)
  - [분석모형 평가 및 개선](#분석모형-평가-및-개선)
    - [분석모형 평가](#분석모형-평가)
      - [평가 지표](#평가-지표)
      - [분석모형 진단](#분석모형-진단)
      - [k-폴드 교차검증](#k-폴드-교차검증)
      - [적합도 검정](#적합도-검정)
    - [분석모형 개선](#분석모형-개선)
      - [과대적합 방지](#과대적합-방지)
      - [매개변수 최적화](#매개변수-최적화)
      - [분석모형 융합](#분석모형-융합)
      - [최종모형 선정](#최종모형-선정)
  - [분석결과 해석 및 활용](#분석결과-해석-및-활용)
    - [분석결과 해석](#분석결과-해석)
      - [분석 모델별 결과 해석](#분석-모델별-결과-해석)
      - [분석 모델별 시각화](#분석-모델별-시각화)
    - [분석결과 시각화](#분석결과-시각화)
      - [데이터 시각화 개요](#데이터-시각화-개요)
      - [데이터 시각화 영역](#데이터-시각화-영역)
      - [시간 시각화](#시간-시각화)
      - [분포 시각화](#분포-시각화)
      - [관계 시각화](#관계-시각화)
      - [비교 시각화](#비교-시각화)
      - [공간 시각화](#공간-시각화)
    - [분석결과 활용](#분석결과-활용)
      - [분석모형 전개](#분석모형-전개)
      - [분석결과 활용 계획 수립](#분석결과-활용-계획-수립)
      - [분석결과 적용과 보고서 작성](#분석결과-적용과-보고서-작성)
      - [분석모형 모니터링](#분석모형-모니터링)
      - [분석모형 리모델링](#분석모형-리모델링)

## 분석모형 평가 및 개선

### 분석모형 평가

#### 평가 지표

- 지도학습-분류모델 평가 지표
  - 오차행렬 : 훈련을 통한 예측 선능을 측정하기 위해 예측 값과 실제 값을 비교하기 위한 표
  |        |         | 실제 답 |       |
  | :----: | :----: | :----: | :----: |
  |        |         | True    | False |
  | 예측 결과 | True | True Positive | False Positive |
  |           | False | False Negative | True Negative |
    - TP : 실제 True 를 True 라고 예측 (정답)
    - FP : 실제 False 을 True 라고 예측 (오답)
    - FN : 실제 True 을 False 라고 예측 (오답)
    - TN : 실제 False 을 False 라고 예측 (정답)
  - 정확도 : Accuracy : 실제 데이터와 예측 데이터를 비교하여 같은 지 판단한다
    $$ Accuracy = \frac{TP + TN}{TP + FP + TN + FN} $$
  - 정밀도 : Precision : Positive 로 예측한 대상 중에 실제와 예측값이 일치하는지 비율이다
    $$ Precision = \frac{TP}{TP + FP} $$
  - 재현율 : Recall :실제 Positive 인 대상 중에 실제와 예측 값이 일치하는 비율
    $$ Recall = \frac{TP}{TP + FN} $$
  - Fa Score : 정밀도와 재현율을 결합한 조화평균 지표로 값이 클수록 모형이 정확한다 판단
    $$ F1 = \frac{Precision \dot Recall}{Precision + Recall} $$
  - ROC 곡선 (Receiver Operating Characteristic)
    - FPR (False Positive Rate) 이 변할 때 민감도인 TPR (True Positive Rate)이 어떻게 변하는지 나타내는 곡선이다.
      $$ FPR = \frac{FP}{FP + TN} $$
      $$ TPR = \frac{TP}{TP + FN} $$
- 지도학습-회귀모델 평가 지표
  - SSE (Sum Squared Error) : 실제값과 예측값의 차이를 제곱하여 더한값
    $$ SSE = \sum_{i=1}^n(y_i-\hat y_i)^2 $$
  - MSE (Mean Squared Error) : 실제값과 예측값의 차이의 제곱에 대한 평균한값
    - 평균 제곱 오차라고도 함
    $$ MSE = \frac{1}{n}\sum_{i=1}^n(y_i-\hat y_i)^2 $$
  - RMSE (Root Mean Squared Error) : MSE에 루트를 취한 값으로 평균제곱근오차라고도 한다
    $$ RMSE = \sqrt{\frac{1}{n}\sum_{i=1}^n(y_i-\hat y_i)^2} $$
  - MAE (Mean Absolute Error) : 실제값과 예측값의 차이의 절대값을 합한 평균값이다
    $$ MAE = \frac{1}{n}\sum_{i=1}^n|y_i-\hat y_i| $$
  - 결정계수 $R^2$ : 회귀모형이 실제값에 얼마나 잘 적합하는지에 대한 비율
    $$ R^2 = 1 - \frac{\sum_{i=1}^n(y_i - \hat y_i)^2}{\sum_{i=1}^n(y_i - \bar y_i)^2} $$
  - Adjusted $R^2$ : 수정된 결정계수 : 다변량회귀분석에서 독립변수가 많아질수록 결정계수가 높아지는데 이를 보완한 결정계수로 표본의 크기와 독립변수의 계수를 추가적으로 고려하여 분모에 위치시킴으로써 결정계수값의 증가도를 보정한다.
    $$ R_a^2 = 1 - (n - 1)\frac{MSE}{SST} $$
  - MSPE (Mean Square Percentage Error) : MSE를 퍼센트로 변환한 값이다
    $$ MSPE = \frac{100\%}{n}\sum_{i=1}^n(y_i-\hat y_i)^2 $$
  - MAPE (Mean Absolut Percentage Error) : MAE를 퍼센트로 변환한 값이다
    $$ MAPE = \frac{100\%}{n}\sum_{i=1}^n|y_i-\hat y_i| $$
  - RMSLE (Root Mean Squared Logarithmic Error) : RMSE에 로그를 취한값으로 이상치에 덜 민감하다
    $$ RMSLE = \sqrt{\frac{1}{n}\sum_{i=1}^n(\log (y_i+1)-\log (\hat y_i + 1))^2} $$
  - AIC (Akaike Infomation Chiterion)
    - 최대 우도에 독립변수의 개수에 대한 손실분을 반영하는 목적으로 모형과 데이터의 확률분포 차이를 측정하는 것으로 AIC값이 낮을수록 모형의 적합도가 높아진다.
      $$ AIC = -2\log L + 2K $$
  - BIC (Bayes Information Criteria)
    - AIC와 동일한 목적을 지니나 주어진 데이터에서 모형의 우도를 측정하기 위한 값에서 유도된 지표로 변수 개수가 많을 수록 AIC보다 더 패널티를 가하는 성격을 가진다
      $$ BIC = -2 \log L + K \log n $$
- 비지도학습-군집분석 평가 지표
  - 비지도학습은 지도학습과 달리 실측자료에 라벨링이 없으므로 모델에 대한 성능평가가 어렵다.
  - 실루엣 계수
    - $a(i)$는 i번째 개체와 같은 군집에 속한 요소들 간 거리들의 평균이며 $b(i)$는 i번째 개체가 속한 군집과 가장 가까운 이운 군집을 계산한 결과. 0.5 이상일 경우 적절하다 판단
    $$ s(i) = \frac{b(i) - a(i)}{max({a(i), b(i)})} $$
  - Dunn index : 군집 간 거리의 최소값을 분자, 군집 내 요소간 거리의 최대값을 분모로 하는 지표, 군집 간 거리는 멀수록 군집 내 분산은 적을 수록 좋은 군집화로 값이 클수록 좋다
    $$ I(C) = \frac{min_{i\neq j}{d_z(c_i, c_j)}}{max_{1\leq l \leq k}\Delta (C_l)} $$

#### 분석모형 진단

- 정규성 가정
  - 분석을 진행하기 전에 데이터가 정규분포를 따르는지를 검정
    - 중심극한정리
  - 정규성 검정 종류
    - 샤피로 웜크 검정
    - 클모고로프 스미르노프 검정
    - QQ 플롯
- 잔차진단
  - 최적의 회귀선은 실측치와 예측치의 차이인 잔차를 가장 적게 해주는 선
    - 잔차의 정규성 진단
    - 잔차의 등분산성 진단
    - 잔차의 독립성 진단

#### k-폴드 교차검증

- k-fold cv
- 홀드아웃 기법
  - train valid test

#### 적합도 검정

- 카이제곱 검정
  - 카이제곱 검정은 기대값과 관측값을 이용한 방법으로 k개의 범주별로 나뉘어진 관측치들과 이와 동일한 범주의 가정된 분포 사이의 적합도를 검정하여 범주형 값 k가 나와야 할 횟수의 기댓값 m_k 의 실제 나온 횟수 x_k 의 차이를 이용하여 검정통계량을 구한다.
    $$ \sum_{k=1}^K \frac{(x_k - m_k)^2}{m_k} $$
- 콜모고르프 스미르노프 검정 (K-S Test)
  - 관측된 자료의 크기를 나열, 관측치들의 누적확률을 구하여 가정된 분포의 누적확률과 비교하는 순서로 진행한다.

### 분석모형 개선

#### 과대적합 방지

- 모델의 낮은 복잡도
  - 드롭아웃 Dropout
- 가중치 감소
  - 규제란 과대적합이 되지 않도록 모델을 강제로 제한하는 의미
  - L2 규제
    $$ L2 : ||w||_2^2 = \sum_{j=1}^m w^2_j $$
  - L1 규제
    $$ L1 : ||w||_1 = \sum+{j=1}^m |w_j| $$
    - L1 규제는 L2규제의 가중치 제곱을 절대값으로 바꾸는 개념
- 편향-분산 트레이드오프

#### 매개변수 최적화

- 확률적 경사 하강법 SGD
  - 데이터 전체를 선택하는 배치 경사 하강법과 비교하면, 랜덤으로 선택한 하나의 데이터로만 계산하는 단순하고 명확한 구조가 장점이다
    $$ W \leftarrow W - \eta \frac{\partial L}{\partial W} $$
- 모멘텀 Momentum
    $$ V \leftarrow \alpha V - \eta \frac{\partial L}{\partial W} $$
    $$ W \leftarrow W + v$$
- AdaGrad
  - 개별 매개변수에 저긍적으로 학습률을 조정하면서 학습을 진행하는 알고리즘
    $$ h \leftarrow h + \frac{\partial L}{\partial W} \frac{\partial L}{\partial W} $$
    $$ W \leftarrow W - \eta \frac{1}{\sqrt h} \frac{\partial L}{\partial W} $$
- Adam
  - 모멘텀과 AdaGrad를 결합한 방법론
- 초매개변수 최적화
  - 학습률
  - 미니배치
  - 훈련 반복(Epoch) 횟수
  - 이터레이션
  - 은닉층 개수

#### 분석모형 융합

- 앙상블 학습
  - 배깅
  - 부스팅
  - 랜덤포레스트
- 결합분석 모형
  - 결합분석 모형은 두 종류 이상의 결과변수를 동시에 분석할 수 있는 방법

#### 최종모형 선정

- 회귀모형에 대한 주요 성능평가지표
  - SSE
  - 결정계수
  - MAE
  - MAPE

- 분류모형에 대한 주요 성능평가지표
  - 특이도 : TN / (TN + FP)
  - 정밀도 : TP / (TP + FP)
  - 재현율 : TP / (TP + FN)
  - 정확도 : accuracy
- 비지도학습 모형에 대한 주요 성능평가지표
  - 군집분석
  - 연관분석

## 분석결과 해석 및 활용

### 분석결과 해석

#### 분석 모델별 결과 해석

- 분석모형 해설
  - 회귀 모델
    - 단차 비교
  - 분류모델
    - ROC 커브
  - 군집분석모델
    - 외부평가
    - 내부평가
    - 팔꿈치 기법 (팔꿈치 모습을 나타내는 곳 값을 적적하다 평가)
    - 실루엣 기법
  - 연관분석
    - 지지도
    - 신뢰도
    - 형상도
- 비즈니스 기여도 평가
  - 빅데이터 분석 목적
    - 고객 인사이트
    - 제품 및 절차 효율성
    - 디지털 제품 및 서비스
    - 운영의 탁월성
    - 디지털 마케팅
    - 위기 관리시스템
  - 분석 결과의 기여도 평가
    - PO : 투자수익률

#### 분석 모델별 시각화

- 회귀모델
  - 히트맵
  - 산점도
- 분류모델
  - KNN : 비교시각화
  - 의사결정나무 : 트리 다이어그램
- 딥러닝
  - Node-link Diagrams for Network Architectures
  - Dimensional Reduction Scatter Plot
  - Line Chart for Temporal Metrics
  - Instance based Analysis & Exploration
- 군집분석 모델
- 연관분석 모델

### 분석결과 시각화

#### 데이터 시각화 개요

- 데이터 시각화 정의
  - 정보를 면확하고 효과적으로 전달하는 것을 목적
  - 스터드 : 추상적인 데이터를 컴퓨터의 쌍방향적 시각 표현을 통해 이해와 인식 증폭
  - 앤디 : 대규모의 데이터를 탐색하고 이해하려 할 때 동일한 범주안에서 많은 양의 데이터에 의미를 부여함으로써 공간에 배치된 숫자의 패턴을 인지하게 하는 방법
- 데이터 시각화 특성
  - 자료로부터 정보를 습득하는 시간을 절감하고 데이터에 대한 즉각적인 판단이 가능하다
  - 통계적 그래픽 : 데이터의 분포와 통계적 정보를 2차원, 3차원 공간에 시각적 표현
  - 주체 지도학 : 특정 주제의 지리적 분포와 패턴을 나타내는 지도 형태의 표현
- 데이터의 유형
  - 범주형
    - 명목형 데이터 :
      - 특정 카테고리가 가질 수 있는 값의 집합
      - 순서를 매길 수 없지만 셀 수 있다
    - 순서형 데이터 :
      - 특정 카테고리가 가질 수 있는 값이 순서로 구분 가능
      - 순서를 매길 수 있고 셀 수 있다.
  - 수치형
    - 이산형 데이터
      - 셀 수 있는 형태의 값을 표현하는 자료
    - 연속형 데이터
      - 연속인 어떤 구간에서 값을 취하는 자료
- 주요 용어
  - 탐색적 자료분석 :EDA
  - 차트
  - 데이터셋
  - 축
  - 스케일
  - 범례
  - 이상치
- 데이터의 시각적 속성
  - 위치, 형태, 크기, 색, 굵기, 선
- 데이터 시각화 방법
  - 시간 시각화
  - 분포 시각화
  - 관계 시각화
  - 비교 시각화
  - 공간 시각화

#### 데이터 시각화 영역

- 정보 시각화
  - 카토그램
  - 분기도
  - 개념도
  - 계통도
  - 네트워크 다이어그램
  - 트리맵
  - 하이퍼볼릭 트리
- 정보 디자인
  - 데이터시각화, 정보시각화, 인포그래픽을 모두 포괄하는 개념이다
    - 시를 미나르의 나폴레옹 행군
- 인포그래픽
  - 픽토그램
  - 기본요소 : 비주얼, 내용, 지식
  - 유형 : 통계 기반, 타임라인 기반, 프로세스 기반, 위치 및 지리기반
  - 장점 :
    - 시각적 즐거움
    - 이해 쉬운 전달
    - 오랜 기억 유지
    - 자발적 확산

#### 시간 시각화

- 시간 시각화 정의
  - 이산형
  - 연속형
- 막대그래프
- 누적막대그래프
- 묶은막대그래프
- 점그래프
- 꺽은선그래프
- 계단그래프
- 추세선

#### 분포 시각화

- 분포 시각화 정의
- 히스토그램 : 세로축은 데이터의 분포 정도를 표현하고, 가로축은 특정 변수의 구간 폭을 의미한다
- 원그래프(파이차트)
- 도넛차트
- 트리맵
- 누적연속그래프(누적영역차트)

#### 관계 시각화

- 관계 시각화 정의
- 산점도(스케터플롯)
- 버블차트
- 히트맵

#### 비교 시각화

- 비교 시각화 정의
- 히트맵
- 체르노프 페이스 : 데이터 표현에 따라 달라지는 차이를 얼굴의 모양으로 나타내는 방법
- 스타차트
- 평행좌표계
  - 하나의 대상이 변수값에 따라 위 아래로 이어지는 연결선으로 그려지는 특징이 있다
- 다차원척도법

#### 공간 시각화

- 공간 시각화 정의
  - 지형코드화
  - 매핑
- 단계구분도
- 카토그램

### 분석결과 활용

#### 분석모형 전개

- 빅데이터 분석 방법론
  - 분석기획
  - 데이터 준비
  - 데이터 분석
  - 시스템 구현
  - 평가 및 전개
- CRISP-DM
  - 비즈니스 이해
  - 데이터 이해
  - 데이터 준비
  - 모델링
  - 평가
  - 전개

- SEMMA
- KDD

- 전개 단계의 역활
  - 분석결과 활용 계획 수립
  - 분석결과 적용과 보고서 작성
  - 분석모형 모니터링
  - 분서모형 리모델링

#### 분석결과 활용 계획 수립

- 분석결과 활용 계획 수립 개요
- 분석결과 활용 시나리오 개발
- 업무 적용 및 효과 검증
  - 성과 목표
  - 성과 지표
  - 활용 계획

#### 분석결과 적용과 보고서 작성

- 분석결과 적용과 성과평가
  - 성과를 측정할 항목을 정하고 항목에 따라 측정식, 주체, 기간, 주기 결정
  - 계획된 성과 측정 방법에 따라 성과를 측정하고 예상 성과지표 비교
  - 실제 성과가 목표치보다 부족하면 먼저 목표치 설정에 문제가 없는지 파악
  - 성과 평가를 문서화하고 관련 부서 및 조직과 공유
- 최종보고서 작성
  - 프로젝트 개요
  - 프로젝트 수행 조직
  - 프로젝트 단계별 선출물 요약
  - 성과평가 결과
  - 모니터링 및 개선 계획

#### 분석모형 모니터링

- 분석 모니터링 필요성
- 분석 모니터링 대상
  - 분석 모니터링의 주요 대상
    - 서비스
    - 분석모델
    - 데이터
  - 분석 서비스 유지관리의 주요 대상
    - 정책/제도
    - 업무
    - 관련 시스템
    - 인력

#### 분석모형 리모델링

- 분석모형 리모델링 과정
- 분석모형 리모델링 방법
  - 분석 목적에 기반한 가설 및 추정방법에 대한 재검토
  - 분석용 데이터의 범위 및 품질 검토
  - 과대적합과 과소적합 방지를 위한 알고리즘 개선
  - 분석알고리즘과 매개 변수 최적화
  - 분석 모형 융합과 재결합
